# 데이터베이스 물리엔진이란?

## 오늘의 학습 주제

- MySQL의 표준 스토리지 엔진 : InnoDB
- RDB는 테이블을 효과적으로 사용하는데, 디스크 I/O 횟수를 최소화하는 방향으로 관리하는데 이에 대한 학습
- RDB에서 테이블을 만들면 무슨일 일어나는지 학습
- 데이터의 `저장단위`인 record가 어떻게 저장되는지 학습
        

## Row Store VS Column Store

- 레코드기반 : Row Store : 레코드 저장 >> 한줄한줄 저장하기
- 컬럼기반 : Column Store : 필드단위로 저장 >> 페이지 단위로 저장
- ![](2021-05-29-16-57-33.png)
- 레코드스토어와 컬럼스토어
- 

### RDB는 Row Store

- 주로 관계형데이터베이스는 이걸로 씀
- 페이지안에 각각 레코드들을 저장한다

### Column Store는 Bigdata에 주로 씀

- 필드별로 따로따로 나눠서 컬럼스토어
- 통계나 빅데이터에 유리
- 필드검색 (예를들어 셀렉트로 하나의 컬럼만 가져올때)
- 필드 한두개만 가져올때는, 
- 단 SELECT * ~ : 이런건 절대 안씀,어차피 이런걸 쓴다면 무슨 방식으로도 성능이 구림(항상 최악)
- 분석쿼리(어낼러틱스) 에 완전 유리함
- AWS REDSHIFT : 분석쿼리 짱짱빠름.

## 데이터베이스 빌드업

- Disk의 블록이란?
- Storage Engines
- 데이터베이스의 Pages

### Disk의 블록

- 디스크에서 한번 읽고 쓸때 최소 단위
- Disk(SSD 혹은 HDD) 에 의존적임
- 물리적으로 읽고/쓰는 과정이기에 시간이 필요하고, 블록 단위로 I/O 를 수행하는데
- I/O를 최소화시키는게 DB성능에 직접적으로 연관됨
- 이게 용량이 과거에는 512KB 정도 됬고 최근에는 32비트 OS에서 4KB정도가 일반적
- 당연하게도 64비트 운영체제는 8KB 블록 사용할꺼같지만, 하위호환성을 위해서 4KB 짜리 블록이 대중적임
- 그러니까 블록은, 디스크 계층에 접근하기 위한 최소 I/O 데이터의 단위

### Storage Engines

- Mysql에서 기본으로 제공해주는 스토리지 엔진 인터페이스가 있고
- 스토리지 엔진 표준이 InnoDB

### Pages

- 스토리지에서 레코드들의 모음을 : 페이지
- InnoDB에서는 : 레코드(데이터 한줄한줄)이 모여서 페이지가 된다.
- 데이터베이스는 이 페이지 단위로 디스크 읽기/쓰기를 진행한다

### OS의 블록단위 >> DB의 페이지



### (참고) 리눅스 커널은 메모리 관리할때 페이지 단위로 관리한다
- 페이징 기법


